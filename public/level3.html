<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Chocolate Chip is my favorite</title>
    <link rel="stylesheet" href="css/main.css">
    <!-- Author: Zak Zapatka and Andrew La Manna-->
    <!-- Site: https://littlegame.herokuapp.com/ -->
  </head>
  <body>
    <header>
	  <div class="level"><button>Level 3</button></div>
    </header>
    <div id="level3">
    	<br />
    	<div id="passBox3">
			<form onSubmit="return false;">
   				<input id="pass" type="text" size="20"/>
      			<input type="submit" value="Submit" onClick="setCookie();"/>
      		</form>
        </div>
    </div>
    <br />
    <div><a href="hint/level3.html"><button>Hint</button></a></div>
</body>
</html>

<script>

makeGet('/level3');

function makeGet(url) {
  var req = new XMLHttpRequest();

  req.onreadystatechange = function() {
    handleRes(req);
  }

  req.open('GET', url);
  req.send();
}

function handleRes(req) {
  if( req.readyState !== XMLHttpRequest.DONE )
    return;

  if(req.status === 200){
    redirect(JSON.parse(req.responseText));
  }
}

function redirect(code){
	clearCookie();
	console.log(code);
	if(code != "level3.html"){
		window.location.href = "https://littlegame.herokuapp.com/" + code;
	}
}

function setCookie() {
	var password = "password=" + document.getElementById("pass").value;
	document.cookie = password;
}

function clearCookie() {
	document.cookie = "password=level3";
}

</script>