<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Nowhere to go but up</title>
    <link rel="stylesheet" href="css/main.css">
    <!-- Author: Zak Zapatka -->
    <!-- Site: https://zpak-hw6.herokuapp.com/ -->
  </head>
  <body onload="checkCookie()">
    <header>
	  <div class="level">Level 3</div>
    </header>
    <div id="level3">
    	<br />
    	<div id="passBox3">
			<form method="post" onSubmit="return false;">
   				<input id="pass" type="text" size="20"/>
      			<input type="submit" value="Submit" onClick="setCookie();"/>
      		</form>
        </div>
    </div>
    <br />
    <a href="hint/level3.html">
    	<div id="next">Hint</div>
    </a>
</body>
</html>

<script>

function setCookie() {
	var password = "password=" + document.getElementById("pass").value;
	console.log(password);
	document.cookie = password;
}

function checkCookie() {
  var req = new XMLHttpRequest();
  req.open('POST', '/cookie', true);
  req.setRequestHeader('Content-type', 'appliction/x-www-form-urlencoded');
  req.send(document.cookie);
}

function makeGet(url) {
  var req = new XMLHttpRequest();

  req.onreadystatechange = function() {
    handleRes(req);
  }

  req.open('GET', url);
  req.send();
}

function handleRes(req) {
  if (req.readyState !== XMLHttpRequest.DONE)
    return;

  if (req.status === 200)
    JSON.parse(req.cookie);
}
  console.log(document.cookie);
</script>